{% extends "core/public_base.htmx.j2" %}
{% load static %}
{% load django_vite %}
{% load breadcrumb_tags %}
{% block title %}{{ data.name }}{% endblock %}
{% block meta_description %}
    {% if component.component_type == 'sbom' %}
        {{ data.name }} - SBOM (Software Bill of Materials) file. Download and view this SBOM.
    {% elif component.component_type == 'document' %}
        {{ data.name }} - Document file. Download and view this document.
    {% endif %}
{% endblock %}
{% block breadcrumb %}
    {% breadcrumb component 'component' %}
{% endblock %}
{% block extra_css %}
    <link rel="stylesheet"
          href="{% static 'css/component-detailed-public.css' %}">
    <link rel="stylesheet"
          href="{% static 'css/components/public-page-layout.css' %}">
{% endblock %}
{% block content %}
    <div class="public-page-layout">
        <div class="content-wrapper">
            <div class="content-container">
                <div class="public-page-header">
                    <div class="page-header-content">
                        <h1 class="page-title">
                            <i class="fas {% if component.component_type == 'sbom' %}fa-file-code{% elif component.component_type == 'document' %}fa-file-alt{% endif %} title-icon"></i>
                            {{ data.name }}
                        </h1>
                        <div class="page-subtitle">
                            <small class="component-link">
                                <i class="fas fa-cube me-1"></i>
                                <a href="{% url 'core:component_details_public' component.id %}"
                                   class="component-breadcrumb-link">{{ component.name }}</a>
                            </small>
                            {% if component.component_type == 'sbom' %}
                                <small class="sbom-format">
                                    <i class="fas fa-tag me-1"></i>
                                    {% if data.format == 'cyclonedx' %}
                                        CycloneDX
                                    {% elif data.format == 'spdx' %}
                                        SPDX
                                    {% else %}
                                        {{ data.format|upper }}
                                    {% endif %}
                                    {{ data.format_version }}
                                </small>
                                {% if data.version %}
                                    <small class="sbom-version">
                                        <i class="fas fa-code-branch me-1"></i><span class="version-display" title="{{ data.version }}">{{ data.version }}</span>
                                    </small>
                                {% endif %}
                            {% elif component.component_type == 'document' %}
                                <small class="document-type">
                                    <i class="fas fa-tag me-1"></i>{{ data.document_type|default:"Document" }}
                                </small>
                                {% if data.version %}
                                    <small class="document-version">
                                        <i class="fas fa-code-branch me-1"></i><span class="version-display" title="{{ data.version }}">{{ data.version }}</span>
                                    </small>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="public-main-content">
                    <div class="content-section">
                        <div class="component-detailed-content">
                            <div class="component-download-section">
                                <div class="standard-card mt-3">
                                    <div class="card shadow-sm">
                                        <div class="card-header">
                                            <div class="header-content">
                                                <h4 class="card-title mb-0">Download {{ component.get_component_type_display }}</h4>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <div class="text-center">
                                                <p class="text-muted mb-3">Download this {{ component.get_component_type_display }} file</p>
                                                <a href="{% if component.component_type == 'sbom' %} {% url 'sboms:sbom_download' data.id %} {% elif component.component_type == 'document' %} {% url 'documents:document_download' data.id %} {% endif %}"
                                                   class="btn btn-primary download-btn">
                                                    <i class="fas fa-download me-2"></i>
                                                    Download {{ component.get_component_type_display }}
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
